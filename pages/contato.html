<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style.css" />
    <!-- BOOTSTRAP CSS -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <!-- PARA FUNCIONAMENTO DE ÍCONES -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <title>Loja Alécio Pineis nº7065 - Rito de York</title>
    <!-- FONTES -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <!-- SCRIPTS -->
    <script src="https://unpkg.com/scrollreveal"></script>
    <!-- <script src="../script.js" type="text/javascript"></script> -->
    <!-- <script src="../scroll.js" type="text/javascript"></script> -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
    <!-- BOOTSTRAP JS -->
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script>
    <!-- FAVICON -->
    <link
      rel="icon"
      type="image/png"
      href="../favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="../favicon.svg" />
    <link rel="shortcut icon" href="../favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="../apple-touch-icon.png"
    />
    <link rel="manifest" href="../site.webmanifest" />
  </head>

  <style>
    html,
    body {
      height: 100%;
      margin: 0;
      display: flex;
      flex-direction: column;
    }

    main {
      flex: 1;
    }

    .container {
      max-width: 450px;
      margin: auto;
      /* margin-top: 40px; */
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
    }

    input,
    textarea {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .btnSubmit {
      width: 100%;
      padding: 10px;
      background: #2d4c9c;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    .btnSubmit:hover {
      background: #2d4c9cd7;
    }
  </style>

  <body>
    <main>
      <header id="header">
        <nav id="nav">
          <button id="btn-mobile">
            <span id="hamburger"></span>
          </button>
          <ul id="menu">
            <li>
              <a href="../index.html" onclick="auxToggleMenu()">Tela Inicial</a>
            </li>
          </ul>
        </nav>
      </header>

      <section id="SecHome" class="identacaoPadrao" style="width: 100%">
        <div class="overlay-top"></div>
        <form
          id="contactForm"
          style="
            position: absolute;
            top: 50%;
            left: 0;
            width: 100%;
            transform: translateY(-50%);
          "
        >
          <div class="container">
            <h2 class="tituloH2 flexCenter txtAzul">Fale Conosco</h2>
            <input type="text" id="name" placeholder="Nome Completo" required />
            <input type="email" id="email" placeholder="E-mail" required />
            <input type="tel" id="whatsapp" placeholder="WhatsApp" required />
            <textarea
              id="message"
              placeholder="Digite sua mensagem..."
              rows="4"
              required
            ></textarea>
            <button class="btnSubmit" type="submit">Enviar Mensagem</button>
          </div>
        </form>
      </section>
    </main>

    <!-- <footer style="background-color: #2d4c9c">
      <div class="ajustaRodape">
        <div>
          <p
            style="
              text-align: center;
              margin: 0;
              color: white;
              font-size: 0.8em;
            "
          >
            © Loja Alécio Pineis. Todos os direitos reservados.
          </p>
        </div>

        <div>
          <p style="margin: 0; font-size: 0.8em">
            <a
              class="ajustaRodape aLinksFooter"
              style="text-decoration: none; gap: 20px"
              href="https://fabiomedina.com.br/"
              target="_blank"
              >Desenvolvido por: Fábio Medina
            </a>
          </p>
        </div>
      </div>
    </footer> -->

    <script>
      document
        .getElementById("contactForm")
        .addEventListener("submit", async function (event) {
          event.preventDefault(); // Impede o envio tradicional do formulário

          const name = document.getElementById("name").value;
          const email = document.getElementById("email").value;
          const whatsapp = document.getElementById("whatsapp").value;
          const message = document.getElementById("message").value;

          // Expressão regular para validar e-mail
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          // Expressão regular para validar telefone (aceita DDD e número com 9 dígitos)
          const whatsappRegex = /^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$/;

          // Valida se todos os campos estão preenchidos
          if (!name || !email || !whatsapp || !message) {
            alert("Por favor, preencha todos os campos!");
            return;
          }

          // Valida o formato do e-mail
          if (!emailRegex.test(email)) {
            alert("Por favor, insira um e-mail válido!");
            return;
          }

          // Valida o formato do número de WhatsApp
          if (!whatsappRegex.test(whatsapp)) {
            alert(
              "Por favor, insira um número de WhatsApp válido! Exemplo: (11) 91234-5678"
            );
            return;
          }

          const data = { name, email, whatsapp, message };

          try {
            const response = await fetch(
              "https://envioemailnodejs.onrender.com/send-email",
              {
                // URL do backend
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(data),
              }
            );

            const result = await response.json();
            alert(result.message); // Exibe mensagem de sucesso ou erro
            document.getElementById("contactForm").reset();
            window.location.href = "../index.html";
          } catch (error) {
            alert("Erro ao enviar mensagem. Tente novamente.");
          }
        });
    </script>
    <script src="../script.js" type="text/javascript"></script>
  </body>
</html>
